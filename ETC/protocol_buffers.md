# 프로토콜 버퍼

- 구글에서 만든 데이터 직렬화 규격

- JSON, YAML, XML이 텍스트 기반 규격이었다면 프로토콜 버퍼는 바이너리 기반 규격

## 특징

- 바이너리 규격

  - 바이너리 형태로 데이터 가공해 저장된 메시지나 파일

  - 데이터를 가공하고 보낸 곳과 메시지를 받는 곳이 같은 규격을 사용해야 복원하고 읽을 수 있음

  - 가공된 데이터가 암호화되어 저장되는 것은 아니므로 보안에 안전한 것은 아님

  - 텍스트 기반 규격에 비해 디버깅하기 어려움

  - 메시지 크기 효율적으로 줄일 수 있고 처리 성능이 빠름

- 메시지 규격 코드화

  - 텍스트 기반 메시지 규격인 JSON, YAML, XML은 라이브러리만 설치하면 코드 안에서 원하는 데이터 규격 만들 수 있음

  - 프로토콜 버퍼 사용하려면 스키마 파일(.proto), 프로토콜 버퍼 컴파일러(protoc), 인터페이스 코드 필요

    - 스키마 파일: 프로토콜 버퍼에서 사용할 메시지 구조 정의. 프로그래밍 언어와 문법 비슷.

    ```
    syntax="<프로토콜 버퍼 문법 버전>";

    message SimpleMessage {
        string name = 1; //<타입> <필드 이름> = <필드 번호>
    }
    enum Type {
        Start = 0; //이넘 필드 번호는 반드시 0부터 시작
    }
    repeated tring str_list = 2; //repaeted 사용해서 리스트 생성
    map<string, string> m = 3;
    ```

    - 프로토콜 버퍼 컴파일러: 스키마 파일에 필요한 언어를 인터페이스 코드로 만들어주는 프로그램.

    - 인터페이스 코드: 컴파일러가 스키마 읽어 만들어낸 결과물
