# JSON

## JSON 이란

- 숫자, 문자, 참 또는 거짓 등 여러 형태의 데이터를 키와 값으로 구조화된 객체에 담아 처리하는 규격

- 가공된 JSON 데이터는 텍스트 기반으로 사람이 쉽게 저장된 데이터 읽고 수정할 수 있고 디버깅도 편리함

- JSON을 사용하면 생산성이 높아지므로 서버와 클라이언트 간 메시지 표준 규격 중 하나로 사용됨

- 데이터베이스 형태를 정의하는 스키마와 비슷한 형태로도 활용됨

- NoSQL 데이터베이스는 JSON과 거의 동일한 BSON을 공식 규격으로 사용함

- MySQL과 같은 관계형 데이터베이스에서도 정형화되지 않은 데이터 보관 시 JSON 선호함

## JSON 특징

- JSON 규격은 UTF-8 문자열 인코딩만 허용하고 BOM(Byte Order Mark) 허용하지 않음

  - 라이브러리에 따라 BOM 허용하는 경우도 있으나 원칙적으로는 허용하지 않음

- JSON은 주석을 지원하지 않음

  - 주석이 필요하다면 XML이나 YAML처럼 주석 지원하는 메시지 규격 사용하는 것이 좋음

## JSON 구조

- 객체 의미하는 중괄호({})로 시작하거나 배열 의미하는 대괄호([])로 시작

  ```
  {
      "id": 1,
      "name": "abc"
  }
  ```

  ```
  [
      1, 2, 3
  ]
  ```

- 콜론 앞에 큰따옴표로 감싼 문자열 데이터는 키(key)

- 콜론 뒤에 오는 데이터는 키에 대한 값(value)

  - 값은 키와 달리 여러 형태의 값 저장 가능 (정수, 실수, 문자열, 널, 객체, 배열 등)

- 키와 값 여러 개 나열할 대 쉽표로 구분하나 마지막 키와 값에는 쉼표를 사용하지 않음

- 이스케이프 문자 사용: \" , \t , \n

- JSON 라이브러리로 읽은 JSON 데이터를 객체로 변환해주는 기능은 직렬화(serialization)

- 데이터를 JSON 문자열로 바꿔주는 기능은 역직렬화(deserialization)

- JSON에는 키이름 지을 때 사용하는 표준이나 관례가 없으므로 규칙 정하고 통일해 사용하는 게 좋음

## JSON 한계

- 불필요한 트래픽 오버헤드

  - 텍스트 기반으로 실질적 데이터 표현에 드는 비용 큼

- 메시지 호환성 유지 어려움

  - 텍스트 기반 데이터의 단점인 유지 보수의 어려움

## +) 추가

- 설정 파일처럼 주석이나 설명이 필요한 데이터 저장 시에는 주석을 공식적으로 지원하는 YAML 사용 고려해보는 것도 좋음

  - YAML: 많이 사용되고 인기 있는 텍스트 기반 데이터 규격

- 몽고 DB에 관심이 있으면 바이너리 지원하는 JSON 규격인 BSON 사용 공부하는 것이 좋음

  - BSON은 표준이 아니므로 몽고 DB가 아닌 환경에 바이너리 데이터를 JSON에 포함할 시 Base64 사용하는 게 좋음

    - Base64: 8비트 이진 데이터를 문자 코드에 영향을 받지 않는 공통 ASCII 영역의 문자들로만 이루어진 일련의 문자열로 바꾸는 인코딩 방식을 가리키는 개념
