# log4j2 취약점 [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)

## log4j 란

- log4j란 로그를 남기기 위해 사용되는 자바 기반 로깅 유틸리티 아파치 오픈소스

<br>

## log4j2 취약점

- 현재 문제가 있는 log4j 라이브러리는 log4j-core-xxx.jar

- 해커들이 목표 대상 컴퓨터의 모든 권한을 취득하여 원격으로 프로그램 실행을 시킬 수 있음.

- log4j2 중에 존재하는 JNDI(Java Naming and Directory Interface) 인젝션 취약점. 공격자가 경로를 자신의 서버로 지정하면 취약점이 있는 서버가 공격자의 서버에서 클래스 다운 받아 코드 실행하는 RCE(Remote Code Execution).

- log4j2 취약점 CVE-2021-44228 은 0 데이 취약점

    - CVE (Common Vulnerability and Exposure) : 대중적으로 알려져있고 영향을 미칠 수 있는 소프트웨어 취약점 

    - 0 데이 취약점 : 해커들이 개발자들보다 먼저 발견한 취약점. 개발자가 취약점을 발견하고 패치했을 때에는 이미 늦었을 수 있다는 뜻.

<br>

## log4j2 취약점 해결방안 
- 취약점 패치된 Log4j 2.15.0(
https://logging.apache.org/log4j/2.x/download.html
) 로 버전 업데이트 해줘야 함

<br>

---

<br>

## 문제 상황

- 스프링 부트 기본 로깅은 logback 이 default로 설정되어 별도 라이브러리 추가하지 않음. 따로 log4j설정을 하지 않았는데 혹시나 해서 확인.

- 'gradlew dependencies' 를 입력하여 디펜던시 트리를 확인 가능

- spring-boot-starter-data-jpa 에 log4j-to-slf4j 와 log4j-api 있는 것을 확인

<br>

## 결론

>Spring Boot users are only affected by this vulnerability if they have switched the default logging system to Log4J2. The log4j-to-slf4j and log4j-api jars that we include in spring-boot-starter-logging cannot be exploited on their own. Only applications using log4j-core and including user input in log messages are vulnerable.


- 따로 log4j를 사용하지 않았으면 추가 조치를 취하진 않아도 됨

- 참고 링크 : https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot
